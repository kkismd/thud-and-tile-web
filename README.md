# Thud & Tile Web版

WebAssembly (Rust) + TypeScript で作られたパズルゲーム

## 🧩 ゲームルール

### 基本ルール
Thud & Tileは、落下するテトロミノ（テトリスピース）を操作して、横一列を完成させることでラインを消去するパズルゲームです。

### 🎨 色とブロックシステム
- **3色システム**: シアン、マゼンタ、イエローの3色のみを使用
- **テトロミノの色**: 1つのテトロミノ内で4つのブロックはそれぞれ異なる色を持ちます

### 🔗 連結ブロックシステム
- **自動連結**: 同じ色のブロック同士が上下左右に隣接すると自動的に連結されます
- **数字表示**: 連結したブロックは**数字**に変化し、連結数（そのブロックが何個のブロックと連結しているか）を表示します

### 🔥 ライン消去システム
- **ライン完成**: 横一列がブロックで埋まるとライン消去が発生します
- **特殊消去ルール**: 
  - 揃ったラインより下にあるはすべて消去され、**数字ブロック**だけが得点になります
  - 揃ったラインは**灰色の固定ブロック**に変化します
- **フィールド縮小**: 固定ブロックはフィールドの底に沈み、**フィールドの高さが永続的に減少**します
- **累積効果**: 消去するたびにフィールドが狭くなり、ゲームの難易度が上がります

### 🎯 スコアシステム
- **色別管理**: スコアとMAX-CHAINを色別（シアン、マゼンタ、イエロー）に管理
- **スコア計算**: `消去されるブロックの数字 × その色のMAX-CHAIN値 × 10点` の合計
- **MAX-CHAIN**: 同色ブロックの連結数のゲーム中での最大値（ブロック着地時に更新）
- **戦略要素**: 同じ色のブロックを大きく連結させてからライン消去することで高得点を狙えます

### 🎮 ゲーム終了
- ブロックがフィールドの上端に達するとゲームオーバー
- フィールドが縮小するため、通常のテトリスより戦略的なプレイが求められます

## 🎮 ゲームプレイ

### デスクトップ操作
- **A/←**: 左移動
- **D/→**: 右移動  
- **S/↓**: ソフトドロップ
- **W/↑**: 回転
- **Space**: ハードドロップ
- **R**: リスタート

### モバイル操作
- **タップ**: 回転
- **横スワイプ**: 左右移動
- **下スワイプ**: ソフトドロップ
- **上スワイプ**: ハードドロップ

## 🚀 開発・デプロイ

### ローカル開発
```bash
# 依存関係インストール
npm install

# WASM ビルド + 開発サーバー起動
npm run wasm:dev

# 個別実行
npm run wasm:build  # WASMビルドのみ
npm run dev         # 開発サーバーのみ
```

### プロダクションビルド
```bash
npm run wasm:build
npm run build
```

### GitHub Pagesデプロイ

#### 方法1: GitHub Actions (自動デプロイ)
1. GitHubリポジトリの Settings → Pages
2. Source を "GitHub Actions" に設定
3. mainブランチにpushすると自動デプロイ

#### 方法2: 手動デプロイ
```bash
# gh-pagesパッケージインストール
npm install --save-dev gh-pages

# デプロイ実行
npm run deploy
```

### デプロイURL
https://kkismd.github.io/thud-and-tile-web/

## 🛠 技術スタック
- **フロントエンド**: Vite + TypeScript
- **ゲームエンジン**: Rust + WebAssembly
- **UI**: レスポンシブCSS + Canvas API
- **デプロイ**: GitHub Pages + GitHub Actions

## 📱 モバイル対応
- レスポンシブレイアウト
- タッチ操作サポート
- ビューポート最適化
- アスペクト比保持